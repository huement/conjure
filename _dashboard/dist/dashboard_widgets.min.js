/*! PressCraft-Dashboard - v1.0.0 */
var failCount=0;function grabStats(){$.ajax({dataType:"json",url:"widgets/sys_stats.php",success:function(t){console.log(t),setTimeout("grabStats()",1e4),cpuCalc(t.cpu);var e=parseInt(100*t.mem_free).toFixed(0)+'<small style="color:#FEFEFE">%</span>',a=parseInt(1e3*t.mem_total).toFixed(0)+" <small>GB</span>";$("#mem_free").html(e),$("#mem_total").html(a),$("#hdd_used").html(t.hdd+'<small style="color:#FEFEFE">%</span>'),$("#uptime").html(t.upt)},error:function(t){failCount++,console.log("system stats could not be fetched"),failCount<5&&setTimeout("grabStats()",1e4)}})}function cpuCalc(t){var e=t[0]+t[1]+t[2],a=e/3*100;console.log(e);var s=parseFloat(a).toFixed(0);$("#cpu_target").html(s+'<small style="color:#FEFEFE">%</span>')}function stylestatus(t){var e="data/stylestats_"+t+".json";$.ajax({dataType:"json",url:e,success:function(t){console.log(t)},error:function(t){console.log("Need StyleStats for that Slug!")}})}function weatherReport(){var t,e="";$.simpleWeather({woeid:"2402292",location:"",unit:"f",success:function(a){a.temp>70?(t="#F7AC57",e="icon-danger"):(t="#0091c2",e="icon-info"),$("#weather_icon_wrapper").addClass(e),$("#weather_icon").addClass("icon-"+a.code).addClass(e),$("#weather_city").text(a.city+", "+a.region),$("#weather_color").css("backgroundColor",t),$("#weather_temp").html(a.temp+'<sup><small style="color:#FEFEFE">Â°F</small></sup>'),$("#weather_cond").text(a.currently)},error:function(t){$("#weather").html("<p>"+t+"</p>")}})}function systemReport(){var t=$.trim($("#systemStatURL").text());console.log(t),$.ajax({url:t,dataType:"json",success:function(t){var e=t.Vitals;$.each(e,function(t,e){console.log(e),$("#Hostname").text(e.Hostname),$("#IPAddr").text(e.IPAddr),$("#Kernel").text(e.Kernel),$("#Distro").text(e.Distro),$("#Uptime").text(e.Uptime),$("#LastBoot").text(e.LastBoot),$("#LoadAvg").text(e.LoadAvg),$("#Processes").text(e.Processes),$("#SysLang").text(e.SysLang)})},error:function(t){console.log("Report Error!"),console.log(t)}})}function unitTestReport(){$.ajax({dataType:"html",url:"unit_tests/unit_test_results/index.html",success:function(t){var e=$(t).find("table.table-bordered");e.addClass("table-responsive table-striped table-sm"),$("#unitTestActivity").html(e)},error:function(t){$("#unitTestActivity").html("<h3>Unit test error!</h3><p>You Unit Tests results could not be loaded.<br/>Please check your configured path or rerun your tests</p>")}})}function statGraph(){var t=["January","February","March","April","May","June","July"],e={labels:t,datasets:[{label:"My First dataset",backgroundColor:$.brandPrimary,borderColor:"rgba(255,255,255,.55)",data:[65,59,84,84,51,55,40]}]},a={maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{gridLines:{color:"transparent",zeroLineColor:"transparent"},ticks:{fontSize:2,fontColor:"transparent"}}],yAxes:[{display:!1,ticks:{display:!1,min:Math.min.apply(Math,e.datasets[0].data)-5,max:Math.max.apply(Math,e.datasets[0].data)+5}}]},elements:{line:{borderWidth:1},point:{radius:4,hitRadius:10,hoverRadius:4}}},s=$("#card-chart1");new Chart(s,{type:"line",data:e,options:a}),e={labels:t,datasets:[{label:"My First dataset",backgroundColor:$.brandInfo,borderColor:"rgba(255,255,255,.55)",data:[1,18,9,17,34,22,11]}]},a={maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{gridLines:{color:"transparent",zeroLineColor:"transparent"},ticks:{fontSize:2,fontColor:"transparent"}}],yAxes:[{display:!1,ticks:{display:!1,min:Math.min.apply(Math,e.datasets[0].data)-5,max:Math.max.apply(Math,e.datasets[0].data)+5}}]},elements:{line:{tension:1e-5,borderWidth:1},point:{radius:4,hitRadius:10,hoverRadius:4}}}}$(document).ready(function(){weatherReport(),systemReport(),void 0!==$("#unitTestActivity").html()&&unitTestReport(),grabStats(),$(".site-list-item").length>0&&$.each($(".site-list-item"),function(t){var e=$(this).data("slug");void 0!==e?stylestatus(e):console.log("WP Site w/o a slug error")}),void 0!==$("#card-chart1").html()&&$("#card-chart1").html().length>10&&(console.log("statGraph"),statGraph()),$(".dtopclose").on("click",function(){$(".dtopalert").alert("close")})});