/*! PressCraft-Dashboard - v1.0.0 */
var failCount=0;function grabStats(){$.ajax({dataType:"json",url:"widgets/sys_stats.php",success:function(t){console.log(t),setTimeout("grabStats()",1e4),cpuCalc(t.cpu);var e=parseInt(100*t.mem_free).toFixed(0)+'<small style="color:#FEFEFE">%</span>',s=parseInt(1e3*t.mem_total).toFixed(0)+" <small>GB</span>";$("#mem_free").html(e),$("#mem_total").html(s),$("#hdd_used").html(t.hdd+'<small style="color:#FEFEFE">%</span>'),$("#uptime").html(t.upt)},error:function(t){failCount++,console.log("system stats could not be fetched"),failCount<5&&setTimeout("grabStats()",1e4)}})}function cpuCalc(t){var e=t[0]+t[1]+t[2],s=e/3*100;console.log(e);var a=parseFloat(s).toFixed(0);$("#cpu_target").html(a+'<small style="color:#FEFEFE">%</span>')}function stylestatus(t){var e="data/stylestats_"+t+".json";$.ajax({dataType:"json",url:e,success:function(t){console.log(t)},error:function(t){console.log("Need StyleStats for that Slug!")}})}function statGraph(){$.fn.peity.defaults.line={delimiter:",",fill:"#94C859",height:90,max:null,min:0,stroke:"#3f3f3f",strokeWidth:1,width:200};var t=$(".line").peity("line",{width:220});setInterval(function(){var e=Math.round(10*Math.random()),s=t.text().split(",");s.shift(),s.push(e),t.text(s.join(",")).change()},1e3)}$(document).ready(function(){var t,e="";console.log("fetching weather"),$.simpleWeather({woeid:"2402292",location:"",unit:"f",success:function(s){console.log(s),s.temp>70?(t="#F7AC57",e="icon-danger"):(t="#0091c2",e="icon-info"),$("#weather_icon_wrapper").addClass(e),$("#weather_icon").addClass("icon-"+s.code).addClass(e),$("#weather_city").text(s.city+", "+s.region),$("#weather_color").css("backgroundColor",t),$("#weather_temp").html(s.temp+'<sup><small style="color:#FEFEFE">Â°F</small></sup>'),$("#weather_cond").text(s.currently)},error:function(t){$("#weather").html("<p>"+t+"</p>")}}),void 0!==$("#unitTestActivity").html()&&$.ajax({dataType:"html",url:"unit_tests/unit_test_results/index.html",success:function(t){var e=$(t).find("table.table-bordered");e.addClass("table-responsive table-striped table-sm"),$("#unitTestActivity").html(e)},error:function(t){$("#unitTestActivity").html("<h3>Unit test error!</h3><p>You Unit Tests results could not be loaded.<br/>Please check your configured path or rerun your tests</p>")}}),setTimeout("grabStats()",500),$(".site-list-item").length>0&&$.each($(".site-list-item"),function(t){stylestatus($(this).data("slug"))}),statGraph()});